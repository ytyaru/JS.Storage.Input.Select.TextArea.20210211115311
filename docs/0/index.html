<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>input,select,textareaの要素をLocalStorageに保存する。</title>
    <script src="./main.js"></script>
</head>
<body>
<h1><a href="https://github.com/ytyaru/JS.Storage.Input.Select.TextArea.20210211115311">input,select,textareaの要素をLocalStorageに保存する。</a></h1>

<!-- text, search, tel, url, email, password -->
<input type="text" placeholder="text">
<input type="tel" pattern="^[0-9\-]+$" placeholder="090-0000-0000">
<input type="url" pattern="^.+$" placeholder="https://www.abc.com/">
<input type="email" pattern="^.+@.+$" placeholder="mail@abc.com">
<input type="password" pattern="^[0-9a-zA-Z_]+$" min="8" max="1024" placeholder="password">
<input type="search" autocomplete list="search-keywords">
<datalist id="search-keywords">
    <option value="検索キーワード候補１">
    <option value="action">
    <option value="back">
    <option value="cancel">
</datalist>
<input type="number" placeholder="100">
<input type="range">
<input type="color">
<!-- datetime, date, month, week, time, datetime-local -->
<input type="datetime" value="2020-01-02T12:34:56Z">
<input type="file" value="File">
<ul class="radio-button-group">
    <li>
        <input type="radio" id="fontSize-small" name="fontSize" value="small">
        <label for="fontSize-small">小</label>
    </li>
    <li>
        <input type="radio" id="fontSize-medium" name="fontSize" value="medium">
        <label for="fontSize-medium">中</label>
    </li>
    <li>
        <input type="radio" id="fontSize-large" name="fontSize" value="large" checked="checked">
        <label for="fontSize-large">大</label>
    </li>
</ul>
<ul class="checkbox-group">
    <li>
        <input type="checkbox" id="fontSize-small" name="fontSize" value="small">
        <label for="fontSize-small">小</label>
    </li>
    <li>
        <input type="checkbox" id="fontSize-medium" name="fontSize" value="medium">
        <label for="fontSize-medium">中</label>
    </li>
    <li>
        <input type="checkbox" id="fontSize-large" name="fontSize" value="large" checked="checked">
        <label for="fontSize-large">大</label>
    </li>
</ul>

<select>
</select>

<textarea>
テキストエリアです。
</textarea>

<dialog open>
    <p>ダイアログを表示します。</p>
</dialog>



    <input type="file" name="files[]" id="fileUpload">
    <script type="text/javascript">
            (function() {
                // Key for local storage, use to save and access.
                var FILE_KEY = 'save.json';

                // fire processUpload when the user uploads a file.
                document.querySelector('#fileUpload').addEventListener('change', handleFileUpload, false);

                // Log any previously saved file.
                console.log('previous save: ', retrieveSave());

                // Setup file reading
                var reader = new FileReader();
                reader.onload = handleFileRead;

                function handleFileUpload(event) {
                    var file = event.target.files[0];
                    reader.readAsText(file); // fires onload when done.
                }

                function handleFileRead(event) {
                    var save = JSON.parse(event.target.result);
                    console.log(save) // {hp: 32, maxHp: 50, mp: 11, maxMp: 23}
                    window.localStorage.setItem(FILE_KEY, JSON.stringify(save));
                }

                function retrieveSave() {
                    return JSON.parse(localStorage.getItem(FILE_KEY))
                }
            })();
    </script>

</body>
</html>
